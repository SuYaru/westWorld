(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b6ad251"],{"1e48":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"casts",on:{contextmenu:function(e){return e.preventDefault(),t.bodyContext()}}},[a("Tabs",{attrs:{type:"card"},on:{"on-click":t.onclicktab}},[t._l(t.tabs,function(t,e){return a("TabPane",{key:e,attrs:{label:t}})}),a("Button",{attrs:{slot:"extra",size:"default"},on:{click:t.handleTabsAdd},slot:"extra"},[t._v("增加")])],2),a("Dropdown",{ref:"menu",staticStyle:{"margin-left":"20px"},attrs:{trigger:"contextMenu"}},[a("a",{attrs:{href:" javascript:void(0)"}},[a("Tree",{attrs:{data:t.treeData},on:{contextmenu:function(e){return e.preventDefault(),t.bodyContext(e)},"on-select-change":t.onTreeSelectChange}})],1),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{nativeOn:{click:function(e){return t.addCate(e)}}},[t._v("新增")]),a("DropdownItem",{nativeOn:{click:function(e){return t.removeData(e)}}},[t._v("删除")]),a("DropdownItem",{nativeOn:{click:function(e){return t.editCate(e)}}},[t._v("修改")])],1)],1),a("Modal",{attrs:{title:"添加节点"},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"formValidate",attrs:{model:t.formValidate,rules:t.ruleValidate,"label-width":100}},[a("FormItem",{attrs:{label:"新节点名称",prop:"title"}},[a("Input",{model:{value:t.formValidate.title,callback:function(e){t.$set(t.formValidate,"title",e)},expression:"formValidate.title"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.handleSubmit("formValidate"),t.handleInner()}}},[t._v("提交")]),a("Button",{staticStyle:{"margin-left":"8px"},on:{click:function(e){return t.handleReset("formValidate")}}},[t._v("重置")])],1)],1)],1)},n=[],i=(a("7f7f"),a("5176")),l=a.n(i),s=a("29eb"),r={data:function(){return{tabs:[],modules:"cate",type:1,treeData:[],modal1:!1,nowId:null,formValidate:{parentId:null,_id:null,title:""},ruleValidate:{title:[{required:!0,message:"The title cannot be empty",trigger:"blur"}]}}},methods:{handleTabsAdd:function(t){console.log(t),this.modules="cateClassify",this.modal1=!0},getTabs:function(){var t=this;this.axios({url:"".concat(s["a"].url,"/cateClassify/list"),method:"post"}).then(function(e){e.data.forEach(function(e){t.tabs.push(e.title)})})},bodyContext:function(){console.log(this),this.$refs.menu.currentVisible=!0},getTreeDate:function(){var t=this;this.axios({url:"".concat(s["a"].url,"/cate/list/").concat(this.type),method:"post"}).then(function(e){t.treeData=e.data})},onclicktab:function(t){this.type=t+1,this.getTreeDate()},onTreeSelectChange:function(t){this.modules="cate",this.nowId=t[0]._id,console.log(this.nowId)},addCate:function(){l()(this.$data.formValidate,this.$options.data().formValidate),delete this.formValidate._id,this.formValidate.parentId=this.nowId,this.formValidate.type=this.type,console.log(this.formValidate),this.modal1=!0},handleInner:function(){},editCate:function(){var t=this;this.axios({url:"".concat(s["a"].url,"/cate/").concat(this.nowId),method:"get"}).then(function(e){t.formValidate=e.data,t.formValidate._id=t.nowId,t.modal1=!0})},removeData:function(){var t=this;console.log(this.nowId),this.nowId?this.$Modal.confirm({title:"确认",content:"<p>你是否确认删除记录?</p>",onOk:function(){t.axios({url:"".concat(s["a"].url,"/cate/").concat(t.nowId),method:"delete"}).then(function(e){console.log(e),t.$Message.success("删除数据成功!"),t.getTreeDate(t.type)})}}):this.$Modal.confirm({title:"提示",content:"<p>请选择一个要删除的节点！</p>"})},handleSubmit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.formValidate._id&&e.formValidate._id.trim().length>0?(console.log(111),e.axios({url:"".concat(s["a"].url,"/cate/").concat(e.formValidate._id),method:"put",data:e.formValidate}).then(function(t){console.log(t),e.$Message.success("修改数据成功!"),e.modal1=!1,e.getTreeDate(t.data.type),l()(e.$data.formValidate,e.$options.data().formValidate),delete e.formValidate._id})):(console.log(e.formValidate),console.log(s["a"].url,e.modules),"cateClassify"==e.modules&&e.tabs.push(e.formValidate.title),e.axios({url:"".concat(s["a"].url,"/").concat(e.modules),method:"post",data:e.formValidate}).then(function(t){console.log(t),e.$Message.success("添加数据成功!"),e.modal1=!1,e.getTreeDate(t.data.type),l()(e.$data.formValidate,e.$options.data().formValidate),delete e.formValidate._id})):e.$Message.error("添加数据失败")})}},mounted:function(){this.getTreeDate(),this.getTabs()}},c=r,d=(a("3929"),a("2877")),u=Object(d["a"])(c,o,n,!1,null,"289abe93",null);e["default"]=u.exports},3929:function(t,e,a){"use strict";var o=a("3fd7"),n=a.n(o);n.a},"3fd7":function(t,e,a){},5176:function(t,e,a){t.exports=a("51b6")},"51b6":function(t,e,a){a("a3c3"),t.exports=a("584a").Object.assign},9306:function(t,e,a){"use strict";var o=a("c3a1"),n=a("9aa9"),i=a("355d"),l=a("241e"),s=a("335c"),r=Object.assign;t.exports=!r||a("294c")(function(){var t={},e={},a=Symbol(),o="abcdefghijklmnopqrst";return t[a]=7,o.split("").forEach(function(t){e[t]=t}),7!=r({},t)[a]||Object.keys(r({},e)).join("")!=o})?function(t,e){var a=l(t),r=arguments.length,c=1,d=n.f,u=i.f;while(r>c){var f,m=s(arguments[c++]),h=d?o(m).concat(d(m)):o(m),p=h.length,g=0;while(p>g)u.call(m,f=h[g++])&&(a[f]=m[f])}return a}:r},a3c3:function(t,e,a){var o=a("63b6");o(o.S+o.F,"Object",{assign:a("9306")})}}]);